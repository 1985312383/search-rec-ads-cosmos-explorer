---
title: 广告术语"黑话"大全 (CPC, CPM, CPA, oCPC, oCPM, RTB 等)
createTime: 2025/11/05 09:34:56
---

## 🧭 背景：推荐系统之后，广告系统登场

在第三章里，我们已经搭建起一套从 **召回 → 排序 → 注意力建模** 的推荐系统“内功心法”：

- 召回阶段：用双塔、YouTubeDNN 等模型快速找出候选集合，预测粗粒度的相关性（如 $p_{\text{click}}$）。
- 排序阶段：用 Wide&Deep、DeepFM、DIN/DIEN 等模型精细估计 **点击率 (pCTR)**、**转化率 (pCVR)** 等概率。

而在本章里，推荐系统不再只是“给谁看什么”，还要回答一个更现实的问题：

> **在有限的广告位上，怎样用算法把流量变现？**

这就进入了 **计算广告 (Computational Advertising)** 的世界：

- 一端连接着 **推荐模型** —— 提供 $p_{\text{CTR}}$、$p_{\text{CVR}}$ 等预测；
- 另一端连接着 **计费与结算** —— 按曝光、点击或转化收钱；
- 中间依赖一整套 **竞价、排序、预算控制与归因** 的数学机制，把“模型输出”翻译成“真实收入与广告主效果”。

本篇就是计算广告的 **术语 + 数学 + 工程实战速成课**：不止记住 CPM/CPC/CPA 这些“黑话”，还要搞清楚它们背后的公式、优化目标与相互关系。

为了方便后文推导，我们先约定一些记号：

$$
\begin{aligned}
N_{\text{imp}}   &:= \text{曝光(Impression) 数}\\
N_{\text{clk}}   &:= \text{点击(Click) 数}\\
N_{\text{conv}}  &:= \text{转化(Conversion) 数，例如下单/付费}\\
\hat p_{\text{CTR}} &:= \frac{N_{\text{clk}}}{N_{\text{imp}}}\\
\hat p_{\text{CVR}} &:= \frac{N_{\text{conv}}}{N_{\text{clk}}} \\
\end{aligned}
$$

其中 $\hat p_{\text{CTR}}$、$\hat p_{\text{CVR}}$ 是基于历史样本的 **频率估计**，而第三章里的排序模型给出的 $p_{\text{CTR}}$、$p_{\text{CVR}}$ 则是 **模型预测的概率**。在广告系统中，这两者会一起用于评估与优化。

---

## 💰 计费模式：CPC / CPM / CPA / CPT

计费模式回答的是：

> **广告主究竟在为“什么事件”付钱？**

常见的四类：

- **CPM (Cost Per Mille)**：按曝光千次计费；
- **CPC (Cost Per Click)**：按点击计费；
- **CPA (Cost Per Action)**：按转化/行为计费；
- **CPT (Cost Per Time)**：按时间段计费（例如包一天的频道首屏）。

### CPM：按曝光千次计费

从财务角度，CPM 的定义非常直接：

$$
\text{CPM} = \frac{\text{总花费}}{N_{\text{imp}}} \times 1000. 
$$

- 单位通常是“元/千次曝光”。
- 对广告主而言，更像是“品牌曝光采购价”；
- 对平台而言，是衡量“每千次展示能赚多少钱”的核心指标。

**数值例子**：

> 某品牌广告投放共展示 $N_{\text{imp}} = 200{,}000$ 次，总花费为 400 元，则
> $$
> \text{CPM} = \frac{400}{200{,}000} \times 1000 = 2\,\text{元/千次曝光}.
> $$

### CPC：按点击计费

在效果广告中，更常用的是 **CPC**：

$$
\text{CPC} = \frac{\text{总花费}}{N_{\text{clk}}}.
$$

如果广告主给出的是“最高愿意为一次点击支付的价格” $b_{\text{click}}$（Click Bid），则：

$$
\text{单次点击成本} \approx \text{实际CPC} \le b_{\text{click}}.
$$

**数值例子**：

> 某广告活动共获得 $N_{\text{clk}} = 8{,}000$ 次点击，总花费 6{,}400 元，则
> $$
> \text{CPC} = \frac{6{,}400}{8{,}000} = 0.8\,\text{元/次点击}.
> $$

### CPA：按转化计费

当广告主更关心“下单/注册/激活”等最终行为时，会使用 **CPA**：

$$
\text{CPA} = \frac{\text{总花费}}{N_{\text{conv}}}.
$$

此时广告主通常给出“每次转化的期望成本” $b_{\text{conv}}$（Conversion Bid），平台需通过控制流量质量与出价，将实际 CPA 控制在可接受范围内。

**数值例子**：

> 电商广告共获得 $N_{\text{conv}} = 500$ 笔下单，总花费 5{,}000 元：
> $$
> \text{CPA} = \frac{5{,}000}{500} = 10\,\text{元/单}.
> $$

### CPT：按时间计费

对首页 Banner、开屏广告等资源，常按时间段售卖：

$$
\text{CPT} = \frac{\text{该时间段总花费}}{\text{时间长度}}.
$$

典型的是“一天固定几万元”，对应的是 **明确的展示档期与品牌曝光**，与点击/转化不直接挂钩。

---

## 📊 效果指标：CTR / CVR / eCPM / ROI / ROAS

有了计费模式，还需要衡量广告效果。本节引入五个最关键的指标。

### CTR：点击率 (Click-Through Rate)

直觉上，CTR 衡量的是“**看到广告的人，有多大概率点了它？**”。

统计定义是：

$$
\hat p_{\text{CTR}} = \frac{N_{\text{clk}}}{N_{\text{imp}}}.
$$

在第三章中，排序模型给出的 $p_{\text{CTR}}$ 是单次展示上的 **点击概率预测**，在线上通常写作 pCTR；而 $\hat p_{\text{CTR}}$ 则是离线统计出来的“真实 CTR”。二者配合用于 **校准与评估**。

**典型范围**（粗略经验）：

- 电商信息流：$1\% \sim 5\%$；
- 搜索广告：$2\% \sim 10\%$，强意图时更高；
- 品牌展示广告：$0.1\% \sim 1\%$。

### CVR：转化率 (Conversion Rate)

CVR 衡量的是“**点了广告的人，有多大概率完成了我们希望的动作？**（下单/注册/激活等）”。

统计定义：

$$
\hat p_{\text{CVR}} = \frac{N_{\text{conv}}}{N_{\text{clk}}}.
$$

在模型侧，我们同样会训练一个 pCVR 模型，预测单次点击下发生转化的概率 $p_{\text{CVR}}$。

### eCPM：用一个公式统一不同计费模式

**eCPM (effective CPM)** 是平台和算法最常用的“通用货币”，定义为：

> **在当前策略下，期望每一千次曝光能带来多少收入。**

数学上：

$$
\text{eCPM} = \mathbb{E}[\text{每次曝光收入}] \times 1000.
$$

不同计费模式下，$\mathbb{E}[\text{每次曝光收入}]$ 的表达略有差异。

1. **CPC 模式**：广告主按点击出价 $b_{\text{click}}$，每次曝光以 $p_{\text{CTR}}$ 的概率带来一次点击，期望收入为
   $$
   \mathbb{E}[\text{收入} | \text{一次曝光}] = b_{\text{click}} \cdot p_{\text{CTR}};
   $$
   因此
   $$
   \text{eCPM}_{\text{CPC}} = b_{\text{click}} \cdot p_{\text{CTR}} \cdot 1000.
   $$

2. **CPA 模式**：按转化出价 $b_{\text{conv}}$，一次曝光以 $p_{\text{CTR}}$ 概率被点击，点击后以 $p_{\text{CVR}}$ 概率转化：
   $$
   \mathbb{E}[\text{收入} | \text{一次曝光}] = b_{\text{conv}} \cdot p_{\text{CTR}} \cdot p_{\text{CVR}},
   $$
   $$
   \text{eCPM}_{\text{CPA}} = b_{\text{conv}} \cdot p_{\text{CTR}} \cdot p_{\text{CVR}} \cdot 1000.
   $$

3. **CPM 模式**：单次曝光的收入就是 $\dfrac{\text{CPM}}{1000}$，因此
   $$
   \text{eCPM}_{\text{CPM}} = \text{CPM}.
   $$

可以把 eCPM 总结成一个统一公式：

$$
\text{eCPM} = b \cdot P(\text{付费事件} \mid \text{曝光}) \cdot 1000,
$$

其中 $b$ 是对应付费事件的出价（按点击、按转化或按曝光），$P(\cdot)$ 则是由 **排序/转化模型** 提供的概率预测。

> 这就是“推荐模型为广告系统服务”的数学枢纽：
> - 第三章的模型给出 $p_{\text{CTR}}$、$p_{\text{CVR}}$；
> - 本章的广告引擎用出价 $b$ 与这些概率组合成 eCPM，完成广告排序与竞价结算。

**数值例子**：

> 若某广告 CPC 出价 $b_{\text{click}} = 1.5$ 元，pCTR 预测为 $p_{\text{CTR}} = 2\%$，则
> $$
> \text{eCPM} = 1.5 \times 0.02 \times 1000 = 30\,\text{元/千次曝光}.
> $$
>
> 若改用 CPA 模式，$b_{\text{conv}} = 30$ 元，pCVR 预测为 $p_{\text{CVR}} = 10\%$，则
> $$
> \text{eCPM} = 30 \times 0.02 \times 0.1 \times 1000 = 60\,\text{元/千次曝光}.
> $$
> 在相同流量下，后者理论上为平台带来更高收入。

### ROI / ROAS：广告主视角的“值不值”

从广告主视角，最关心的是“**花出去的钱，带来了多少回报**”。常用两类指标：

- **ROI (Return on Investment)**：
  $$
  \text{ROI} = \frac{\text{收入} - \text{成本}}{\text{成本}}.
  $$
- **ROAS (Return on Ad Spend)**：
  $$
  \text{ROAS} = \frac{\text{收入}}{\text{广告花费}}.
  $$

若假设平均每次转化带来的客单价为 $v$，则在 CPA 模式下：

$$
\text{收入} = v \cdot N_{\text{conv}}, \quad
\text{成本} = \text{CPA} \cdot N_{\text{conv}}.
$$

因此
$$
\text{ROI} = \frac{v - \text{CPA}}{\text{CPA}}, \quad
\text{ROAS} = \frac{v}{\text{CPA}}.
$$

这组公式为后文的 **出价策略与预算控制** 提供了理论基础。

---

## 🏦 竞价与广告排序：从 pCTR/pCVR 到 eCPM

当同一个位置有多条广告竞争时，平台需解决两个问题：

1. **排序谁靠前？** —— 决定展示顺序；
2. **谁付多少钱？** —— 决定实际扣费。

### 排序公式：Score = bid × pCTR × 质量分

大多数主流广告系统（搜索广告、信息流广告等）都采用类似的排序公式：

$$
\text{Score}_i = b_i \cdot \text{pCTR}_i \cdot q_i,
$$

其中：

- $b_i$：广告主对第 $i$ 个广告的出价（按点击或按转化）；
- $\text{pCTR}_i$：排序模型预测的点击率；
- $q_i$：质量分 (Quality Score)，反映广告素材质量、相关度、历史表现等。

如果是 CPA 模式，还会进一步考虑 pCVR：

$$
\text{Score}_i = b_{i,\text{conv}} \cdot \text{pCTR}_i \cdot \text{pCVR}_i \cdot q_i.
$$

**直觉理解**：Score 实际上就是 eCPM 的一个变体：

$$
\text{Score}_i \propto \text{eCPM}_i.
$$

平台通过按 Score 降序排序，实现了对 **期望收入/有效转化的近似最大化**，而质量分 $q_i$ 则保证了用户体验和广告规范。

### GSP：广义二价拍卖 (Generalized Second Price)

在 CPC 模式下，互联网上广泛采用 **GSP** 作为竞价与定价机制。其核心思想可以类比为：

> **拍卖会上，出价最高的人拿到最好的位置，但实际支付的价格接近“压在他下面的那个人的出价”。**

形式化一点，假设：

- 按 $\text{Score}_i = b_i \cdot q_i$ 排序，得到名次 $1,2,\dots$；
- 第 $i$ 名广告的质量分为 $q_i$，第 $i+1$ 名的 Score 为 $S_{i+1} = b_{i+1} q_{i+1}$。

则第 $i$ 名的 **实际 CPC** 大致为：

$$
\text{CPC}_i = \frac{S_{i+1}}{q_i} = \frac{b_{i+1} q_{i+1}}{q_i}.
$$

> 直觉：为了保持自己在当前位置不被“挤下去”，他只需要略高于下一名的有效出价 $\dfrac{b_{i+1} q_{i+1}}{q_i}$ 即可。

### VCG：更“公平”的定价机制

**VCG (Vickrey–Clarke–Groves)** 是一种具有良好博弈论性质（真实出价为优势策略）的拍卖机制。在搜索广告位场景下，可形式化为：

- 设第 $i$ 个广告位的点击率衰减系数为 $\alpha_i$（位置越靠下，$\alpha_i$ 越小）；
- 设排序后第 $k$ 位广告的出价和质量分分别为 $b_k, q_k$。

则位于第 $i$ 位的广告主，其 **每次点击价格** 可写成：

$$
\text{CPC}_i = \frac{1}{\alpha_i q_i} \sum_{k>i} (\alpha_{k-1} - \alpha_k) b_k q_k.
$$

直觉上，这个价格等于“**因为你存在，所有后面广告主的总收益减少量**”，即你对他人的外部性。VCG 保证了“**说真话最优**”，但在工程实现和业务解释上略复杂，因此工业界更多采用近似的 GSP 机制。

---

## 📈 出价策略：从 ROI 约束推导最优 bid

对广告主而言，一个常见目标是：

> 在期望 ROI 不低于某个阈值 $R^{\ast}$ 的前提下，尽可能获取更多流量。

考虑 **CPC + 转化价值** 的情形：

- 设每次转化带来的平均价值为 $v$；
- 模型预测的 pCVR 为 $p_{\text{CVR}}$；
- 出价为每次点击成本 $b$。

对单次点击，期望收益与成本为：

$$
\mathbb{E}[\text{收益} | \text{一次点击}] = v \cdot p_{\text{CVR}}, \quad
\mathbb{E}[\text{成本} | \text{一次点击}] = b.
$$

则 ROI 为：

$$
\text{ROI} = \frac{v p_{\text{CVR}} - b}{b}.
$$

在希望 $\text{ROI} \ge R^{\ast}$ 的前提下，有：

$$
\frac{v p_{\text{CVR}} - b}{b} \ge R^{\ast}
\iff v p_{\text{CVR}} \ge b (1+R^{\ast})
\iff b \le \frac{v p_{\text{CVR}}}{1+R^{\ast}}.
$$

> 这给出了一个简单但非常实用的出价上界：
> $$
> b^{\ast} = \frac{v p_{\text{CVR}}}{1+R^{\ast}}.
> $$
>
> 给定目标 ROI 和模型 pCVR，就可以反推出“**这次点击最多值多少钱**”。

在实际系统中，oCPC/oCPA 等智能出价产品，往往都是在类似的理论基础上，再叠加更多业务约束与探索机制。

---

## 预算与 Pacing：如何“又快又稳”地花完钱

广告主通常会给出一个 **周期预算**（如日预算 $B$），平台需要在一天内 **既不要过早烧完，也不要到晚上还剩一大半**。这就是 **Pacing（投放节奏控制）** 的任务。

### 目标消耗曲线与误差

假设我们按时间把一天划分为 $T$ 个时间段（如 24 个小时），则理想状态下，希望在第 $t$ 段结束时的累计消耗为：

$$
S^{\ast}(t) = B \cdot \frac{t}{T}.
$$

实际消耗 $S(t)$ 与目标之间的差异：

$$
e(t) = S^{\ast}(t) - S(t).
$$

- $e(t) > 0$：表示“**花得太慢了**”，可以适当提高出价/放宽流量；
- $e(t) < 0$：表示“**花得太快了**”，需要降出价/收紧流量。

### 简单的比例调节 (P 控制)

一个最简化的 Pacing 策略是对出价乘以一个 **动态因子** $m_t$：

$$
b_t = m_t \cdot b_0,
$$

并迭代更新 $m_t$：

$$
m_{t+1} = m_t \left(1 + k \cdot \frac{e(t)}{B}\right),
$$

其中 $k$ 是一个小的学习率（如 0.1）。

- 如果 $e(t) > 0$（花得慢），$m_{t+1} > m_t$，出价略有提升，加速消耗；
- 如果 $e(t) < 0$（花得快），$m_{t+1} < m_t$，出价略有下降，放慢节奏。

实际系统中会引入 **指数平滑、PID 控制**、流量预测等组件，但核心思想都离不开“**对比目标曲线 vs 实际消耗，不断纠偏**”。

---

## 🔗 归因模型：谁该为这次转化“背锅”？

在真实世界中，用户完成一次转化（如下单），往往经历多次触达：

> 搜索广告 → 信息流广告 → 推送通知 → 朋友圈种草 → 最终转化。

问题来了：

> 这一次转化的价值，应该如何在多个触达点上 **分配“贡献度”**？

这就是 **归因 (Attribution)**。我们可以用一个统一的加权公式来刻画：

$$
V = \sum_{i=1}^L w_i \cdot v, \quad \sum_{i=1}^L w_i = 1, \; w_i \ge 0,
$$

其中：

- 一条转化路径上共有 $L$ 次触达；
- $v$ 是此次转化的总价值（如客单价）；
- $w_i$ 是第 $i$ 次触达的归因权重。

不同归因策略，就是采用了不同的权重设计：

### Last Click：最后一次说了算

$$
w_L = 1, \quad w_i = 0 \; (i < L).
$$

所有转化价值都记在最后一次触达头上，简单粗暴但易于落地，因此在工业界非常常见。

### First Click：第一印象最重要

$$
w_1 = 1, \quad w_i = 0 \; (i > 1).
$$

适用于“品牌教育型”广告场景：谁先唤起了用户的兴趣，谁就拿全部功劳。

### 线性归因：雨露均沾

$$
w_i = \frac{1}{L}, \quad i=1,\dots,L.
$$

每个触达平分转化价值，适合“难以区分边际贡献”的复杂路径。

### 时间衰减归因：离转化越近，权重越大

设第 $i$ 次触达发生在时间 $t_i$，转化发生在时间 $T$，则可令：

$$
\tilde w_i = \exp\big(-\lambda (T - t_i)\big), \quad
w_i = \frac{\tilde w_i}{\sum_{k=1}^L \tilde w_k},
$$

其中 $\lambda>0$ 控制“记忆衰减”速度。$\lambda$ 越大，越偏向于给最近的触达更高权重。

---

## 🔬 A/B 测试与统计显著性：这次优化到底“真涨”了吗？

当我们在出价策略、排序模型、Pacing 等模块上做了改动，需要通过 **A/B 测试** 来验证是否真正提升了 CTR、CVR 或收入指标。

### CTR 的估计与置信区间

可以把每一次曝光是否被点击视作一次伯努利试验，$Y_i \in \{0,1\}$，则：

$$
\hat p_{\text{CTR}} = \frac{1}{N_{\text{imp}}} \sum_{i=1}^{N_{\text{imp}}} Y_i.
$$

在样本量较大时，可用正态近似给出 $95\%$ 置信区间：

$$
\hat p_{\text{CTR}} \pm 1.96 \sqrt{\frac{\hat p_{\text{CTR}} (1-\hat p_{\text{CTR}})}{N_{\text{imp}}}}.
$$

### 两个版本 CTR 差异的显著性

设 A、B 两个版本的 CTR 估计分别为 $\hat p_A, \hat p_B$，对应曝光数为 $n_A, n_B$。则差值

$$
\Delta = \hat p_B - \hat p_A
$$

的标准误差约为：

$$
\text{SE}(\Delta) = \sqrt{\frac{\hat p_A (1-\hat p_A)}{n_A} + \frac{\hat p_B (1-\hat p_B)}{n_B}}.
$$

于是可以构造 z 统计量：

$$
z = \frac{\Delta}{\text{SE}(\Delta)}.
$$

若 $|z| > 1.96$，则在约 5% 的显著性水平下认为 B 与 A 的 CTR 有显著差异。

### 粗略估算最小样本量

若希望检测到“**CTR 至少提升 $\Delta$**”，且基准 CTR 约为 $p$，在显著性水平 $\alpha$ 下，每组所需样本量可近似为：

$$
n \approx \frac{2 p (1-p) z_{1-\alpha/2}^2}{\Delta^2},
$$

其中 $z_{1-\alpha/2}$ 是标准正态分布上 $1-\alpha/2$ 分位数（如 $\alpha=0.05$ 时约为 1.96）。

---

## 🧷 全链路视图：术语之间的关系图

下面用一张简化的 Mermaid 图，总结前文术语在 **整条广告链路** 上的位置：

```mermaid
graph LR
    U[用户请求] --> R[召回模型<br/>pCTR, 粗排]
    R --> Rank[排序模型<br/>pCTR, pCVR]
    Rank --> Auction[广告竞价排序<br/>Score = bid × pCTR × 质量分]
    Auction --> Imp[曝光 N_imp]
    Imp -->|点击 Y=1| Click[点击 N_clk<br/>CTR = N_clk / N_imp]
    Click -->|转化 Z=1| Conv[转化 N_conv<br/>CVR = N_conv / N_clk]
    Conv --> Billing[计费&结算<br/>CPM/CPC/CPA, eCPM]
    Billing --> Report[报表&归因<br/>ROI/ROAS, 归因模型]
```

这张图里：

- 第三章的模型主要作用在 **R / Rank** 节点；
- 本章的术语（CPM/CPC/CPA、eCPM、GSP、归因、A/B 测试等）则集中在 **Auction / Billing / Report** 部分；
- 它们共同构成了一套“**从概率到收益，从点击到现金流**”的闭环。

---

## 📖 延伸阅读

1. *The Economics of Sponsored Search Advertising* – 经典搜索广告经济学综述，系统介绍 GSP/VCG 等拍卖机制。
2. *Internet Advertising and Ad Auctions* – 多校联合的在线广告公开课教材，对计算广告系统做了全面梳理。
3. *Statistical Methods in Online A/B Testing* – 介绍 CTR/CVR 等比例指标的显著性检验与实验设计。
4. 各大广告平台公开文档（如 Google Ads、Facebook Ads、阿里妈妈等）中对 CPM/CPC/CPA、eCPM、ROI 的业务解释与实践案例。

> 🧠 **思考题**
>
> 1.  在 CPC 与 CPA 两种计费模式下，如果你的排序模型给出的 pCTR/pCVR 一样，你会如何比较它们在平台收入与广告主 ROI 上的差异？
> 2.  在真实系统中，质量分 $q_i$ 往往会惩罚“标题党”和高投诉率广告。你会如何通过数学方式把这些因素融入 Score 公式？
> 3.  对同一个广告系列，若你观测到 CTR 提升但 ROI 下降，可能的原因有哪些？你会从哪些指标入手排查？
> 4.  在预算有限且强约束 ROI 的场景下，你会如何设计 oCPC/oCPA 的出价更新策略，以平衡“快速放量”和“效果稳定”？
> 5.  对一个低日活 App，如果想通过 A/B 测试验证新出价策略是否有效，你会如何估算需要跑多久、积累多少样本量？

::: tip 🎉 章节小结
本节用一整套“**从点击概率到现金流**”的数学语言，把计算广告中的常见术语串成了闭环：

- 从 CPM/CPC/CPA/CPT 出发，定义了广告主究竟在为“什么事件”付费；
- 通过 CTR/CVR、eCPM、ROI/ROAS 等指标，把第三章的 pCTR/pCVR 预测，与平台收入、广告主效果联系在一起；
- 借助 GSP/VCG、出价策略与 Pacing，解释了广告排序与预算控制背后的优化目标；
- 通过归因模型与 A/B 测试，完成从“单次展示”到“长期业务决策”的闭环验证。

掌握这些概念与公式，你就完成了从“推荐算法工程师”到“懂钱的推荐/广告工程师”的关键一步：不仅能算出用户会不会点、会不会买，还能回答——**这样投放，值不值得？**
:::
