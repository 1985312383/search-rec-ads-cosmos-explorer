---
title: æŸ¥è¯¢é¢„å¤„ç†ï¼šæ‰“ç£¨æœç´¢çš„"ç¬¬ä¸€é“å…³å¡"
createTime: 2025/06/05 09:34:56
---

## ğŸ§¹ æŸ¥è¯¢é¢„å¤„ç†ï¼šæ‰“é€šç»è„‰çš„â€œåŸºç¡€åŠŸâ€

> **é¢„å¤„ç† (Preprocessing) æ˜¯æŸ¥è¯¢ç†è§£çš„â€œå‰å“¨ç«™â€**ã€‚æ¤æ ¹äºè¯æ³•ä¸è¯­ä¹‰åŒ¹é…çš„ä¸‰å±‚åœ°åŸºï¼Œé¢„å¤„ç†çš„è´¨é‡ç›´æ¥å†³å®šäº†åç»­é“¾è·¯çš„ä¸Šé™ã€‚

### ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦é¢„å¤„ç†ï¼Ÿ
- **æŸ¥è¯¢â€œçŸ­ä¸”è„â€**ï¼šç”¨æˆ·è¾“å…¥å……æ»¡å£è¯­åŒ–ã€é”™åˆ«å­—ã€ç®€ç¹æ··å†™ã€ç‰¹æ®Šç¬¦å·ç”šè‡³è¡¨æƒ…åŒ…ã€‚
- **è¯¯å·®æ”¾å¤§æ•ˆåº”**ï¼šå¦‚æœåœ¨å…¥å£å¤„æ²¡æœ‰çº æ­£ `jave` ä¸º `java`ï¼Œåç»­æ‰€æœ‰çš„æ·±åº¦å­¦ä¹ æ¨¡å‹å’Œæ’åºç®—æ³•éƒ½å°†åœ¨é”™è¯¯çš„åŸºç¡€ä¸Šè¿è¡Œã€‚

> **æ¯”å–»**ï¼šé¢„å¤„ç†æ˜¯â€œæ‰“é€šä»»ç£äºŒè„‰â€ã€‚ç»è„‰ä¸é€šï¼Œå†å¼ºçš„å†…åŠŸï¼ˆæ·±åº¦å­¦ä¹ ï¼‰ä¹Ÿéš¾ä»¥æ–½å±•ã€‚

---

## ğŸ” å…³é”®æµç¨‹æ¶æ„

é¢„å¤„ç†é€šå¸¸æ˜¯ä¸€ä¸ªçº¿æ€§çš„æµæ°´çº¿ï¼ˆPipelineï¼‰ï¼Œæ¯ä¸€çº§å¤„ç†éƒ½æ˜¯å¯¹ Query çš„ä¸€æ¬¡â€œå‡€åŒ–â€ã€‚

```mermaid
graph LR
    Q[åŸå§‹æŸ¥è¯¢] --> N1[å­—ç¬¦æ¸…æ´—]
    N1 --> N2[æ ‡å‡†åŒ–]
    N2 --> N3[åˆ†è¯]
    N3 --> N4[æ‹¼å†™çº é”™]
    N4 --> N5[å½’ä¸€åŒ–]
    N5 --> Out[æ ‡å‡†æŸ¥è¯¢]

    subgraph "æ¸…æ´—ä¸å½’ä¸€"
    N1
    N2
    N5
    end

    subgraph "æ ¸å¿ƒç®—æ³•"
    N3
    N4
    end
```

---

## ğŸ§© æ ¸å¿ƒæ¨¡å—è¯¦è§£

### 1) å­—ç¬¦æ¸…æ´—ä¸è§„èŒƒåŒ– (Cleaning)
- **ç›®æ ‡**ï¼šå»é™¤å™ªéŸ³ï¼Œç»Ÿä¸€æ ¼å¼ã€‚
- **æ“ä½œ**ï¼š
    - å»é™¤ä¸å¯è§å­—ç¬¦ã€HTML æ ‡ç­¾ã€æ§åˆ¶å­—ç¬¦ã€‚
    - **å…¨åŠè§’è½¬æ¢**ï¼š`Aï¼¢ï¼£` -> `ABC`ã€‚
    - **ç®€ç¹è½¬æ¢**ï¼š`æ©Ÿå™¨å­¸ç¿’` -> `æœºå™¨å­¦ä¹ `ã€‚
    - **å¤§å°å†™ç»Ÿä¸€**ï¼š`Python` -> `python`ã€‚

### 2) åˆ†è¯ä¸åœç”¨è¯ (Tokenization)
- **ä¸­æ–‡æŒ‘æˆ˜**ï¼šç†è§£è¯ç•Œï¼Œå¤„ç†æ­§ä¹‰ï¼ˆå¦‚ `å—äº¬å¸‚/é•¿æ±Ÿ/å¤§æ¡¥` vs `å—äº¬/å¸‚é•¿/æ±Ÿå¤§æ¡¥`ï¼‰ã€‚
- **å·¥å…·**ï¼š`jieba` (åŸºç¡€), `HanLP` (ä¸“ä¸š), `LTP` (å­¦æœ¯)ã€‚
- **åœç”¨è¯**ï¼šç§»é™¤ `çš„`ã€`äº†`ã€`å‘¢` ç­‰æ— å®é™…è¯­ä¹‰ä»·å€¼çš„è™šè¯ï¼Œä½†éœ€æ³¨æ„åˆ«è¯¯æ€â€œè¯ä¹‰å…³é”®åœç”¨è¯â€ï¼ˆå¦‚â€œä¸æ˜¯â€ï¼‰ã€‚

### 3) æ‹¼å†™çº é”™ (Spell Correction)
çº é”™æ˜¯é¢„å¤„ç†ä¸­æœ€å…·æŒ‘æˆ˜çš„ç¯èŠ‚ï¼Œé€šå¸¸é‡‡ç”¨**å€™é€‰ç”Ÿæˆ + å€™é€‰æ’åº**çš„ç­–ç•¥ï¼š
- **å€™é€‰ç”Ÿæˆ**ï¼šåŸºäºè¯å…¸ã€ç¼–è¾‘è·ç¦»ã€æ‹¼éŸ³ç›¸ä¼¼åº¦ã€é”®ç›˜é‚»è¿‘æ€§ã€‚
- **å€™é€‰æ’åº**ï¼šä½¿ç”¨è¯­è¨€æ¨¡å‹ï¼ˆn-gram æˆ– BERTï¼‰è®¡ç®—å€™é€‰è¯åœ¨ä¸Šä¸‹æ–‡ä¸­çš„åˆç†æ€§ã€‚

### 4) å•ä½ä¸åˆ«åå½’ä¸€åŒ– (Normalization)
- **å•ä½å½’ä¸€**ï¼š`100kg` -> `100åƒå…‹`ï¼Œ`50RMB` -> `50å…ƒ`ã€‚
- **åˆ«åæ˜ å°„**ï¼š`å‡¤æ¢¨` -> `è è`ï¼Œ`ip14pm` -> `iphone 14 pro max`ã€‚

---

## ğŸ§± æ ¸å¿ƒé€»è¾‘ç¤ºä¾‹ (Python)

ä¸å†å±•ç¤ºå¤æ‚çš„å·¥ç¨‹æ¡†æ¶ï¼Œè¿™é‡Œæä¾›æ ¸å¿ƒé¢„å¤„ç†é€»è¾‘çš„ç²¾ç®€å®ç°ï¼Œå¸®åŠ©ä½ å»ºç«‹ç›´è§‰ï¼š

```python
import re
import jieba

class SimplePreprocessor:
    def __init__(self):
        self.stop_words = {"çš„", "äº†", "å’Œ", "æ˜¯"}
        self.alias_map = {"ip14pm": "iphone 14 pro max", "å‡¤æ¢¨": "è è"}

    def clean(self, text: str) -> str:
        # å»é™¤ HTML å’Œç‰¹æ®Šç¬¦å·ï¼Œç»Ÿä¸€å¤§å°å†™
        text = re.sub(r"<[^>]+>", "", text)
        text = text.lower().strip()
        return text

    def normalize(self, text: str) -> str:
        # åˆ«åæ›¿æ¢
        for alias, standard in self.alias_map.items():
            text = text.replace(alias, standard)
        return text

    def process(self, query: str) -> list:
        cleaned = self.clean(query)
        normalized = self.normalize(cleaned)
        # åˆ†è¯å¹¶å»åœç”¨è¯
        tokens = [w for w in jieba.lcut(normalized) if w not in self.stop_words]
        return tokens

# ä½¿ç”¨ç¤ºä¾‹
pre = SimplePreprocessor()
print(pre.process("<b>ä¹° ip14pm çš„</b>")) # ['ä¹°', 'iphone 14 pro max']
```

---

## ğŸ­ ç”Ÿäº§å®è·µä¸è¯„ä¼°æŒ‡æ ‡

åœ¨å·¥ä¸šçº§æœç´¢ç³»ç»Ÿä¸­ï¼Œé¢„å¤„ç†çš„è¿ç»´è‡³å…³é‡è¦ï¼š

| æŒ‡æ ‡ç±»å‹ | æ ¸å¿ƒæŒ‡æ ‡ | è¯´æ˜ |
| :--- | :--- | :--- |
| **è´¨é‡æŒ‡æ ‡** | çº é”™å‡†ç¡®ç‡ (Acc) | çº é”™ç»“æœä¸­æ­£ç¡®çš„æ¯”ä¾‹ |
| | è¯¯çº ç‡ (False Positive) | åŸæœ¬æ­£ç¡®çš„è¯è¢«æ”¹é”™çš„æ¯”ä¾‹ (æå…¶é‡è¦) |
| **æ€§èƒ½æŒ‡æ ‡** | å¹³å‡è€—æ—¶ (Latency) | é€šå¸¸éœ€æ§åˆ¶åœ¨ 5ms - 20ms ä»¥å†… |
| | ç¼“å­˜å‘½ä¸­ç‡ | çƒ­é—¨æŸ¥è¯¢é¢„å¤„ç†ç»“æœçš„å¤ç”¨ç‡ |
| **ä¸šåŠ¡æŒ‡æ ‡** | NDCG / CTR æå‡ | é¢„å¤„ç†å¯¹æœ€ç»ˆæœç´¢æ’åºæ•ˆæœçš„è´¡çŒ® |

### ğŸ› ï¸ è°ƒä¼˜ç»éªŒè°ˆ
1. **ç™½åå•ç­–ç•¥**ï¼šå¯¹äºä¸“æœ‰åè¯ã€çƒ­é—¨æ–°è¯ï¼Œé€šè¿‡ç™½åå•é˜²æ­¢çº é”™â€œè¯¯ä¼¤â€ã€‚
2. **ä¼˜é›…é™çº§**ï¼šå¦‚æœçº é”™æ¨¡å—ç½®ä¿¡åº¦ä¸é«˜ï¼Œå¯ä»¥ä»…ä½œä¸ºâ€œæœç´¢å»ºè®®â€æç¤ºç”¨æˆ·ï¼Œè€Œéå¼ºåˆ¶æ”¹å†™ã€‚
3. **è¯å…¸ç‰ˆæœ¬åŒ–**ï¼šè¯å…¸çš„æ›´æ–°å¿…é¡»ç»è¿‡ç¦»çº¿å›æµ‹ï¼Œé˜²æ­¢â€œä¿®å¥½ä¸€ä¸ªï¼Œæ”¹åä¸€å †â€ã€‚

---

## ğŸ¤” æ€è€ƒé¢˜

> 1. å¦‚ä½•å¹³è¡¡çº é”™çš„å‡†ç¡®ç‡å’Œè¯¯çº ç‡ï¼Ÿåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½ å®å¯ä¸çº é”™ï¼Ÿ
> 2. å¯¹äº "æˆ‘æƒ³ä¹° 50 å…ƒå·¦å³çš„è‹¹æœ" è¿™ä¸ªæŸ¥è¯¢ï¼Œé¢„å¤„ç†è¯¥å¦‚ä½•å¤„ç† "è‹¹æœ" ä¸€è¯ï¼Ÿ
> 3. é¢å¯¹å±‚å‡ºä¸ç©·çš„ç½‘ç»œæ¢—ï¼ˆå¦‚ "yyds"ï¼‰ï¼Œé¢„å¤„ç†ç³»ç»Ÿè¯¥å¦‚ä½•ä¿æŒæ—¶æ•ˆæ€§ï¼Ÿ

::: tip ğŸ‰ ç« èŠ‚å°ç»“
é¢„å¤„ç†æ˜¯æœç´¢ç³»ç»Ÿçš„â€œç¬¬ä¸€é“è¿‡æ»¤å™¨â€ã€‚é€šè¿‡æ¸…æ´—ã€æ ‡å‡†åŒ–ã€åˆ†è¯ã€çº é”™ä¸å½’ä¸€åŒ–ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå°†â€œè„â€è¾“å…¥è½¬åŒ–ä¸ºâ€œå‡€â€ä¿¡å·ã€‚è®°ä½ï¼š**åƒåœ¾è¿›ï¼Œåƒåœ¾å‡º (Garbage In, Garbage Out)**ã€‚æŠŠé¢„å¤„ç†åšæ‰å®ï¼Œèƒ½è®©åç»­çš„å¬å›ã€æ’åºç³»ç»Ÿäº‹åŠåŠŸå€ã€‚
:::
